<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Tracker</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background: #f8f9fa; }
        .loan-list { max-height: 300px; overflow-y: auto; }
        .pie-container { display: flex; gap: 2rem; justify-content: center; margin-bottom: 2rem; }
        .pie-chart {
          width: 300px !important;
          height: 300px !important;
          max-width: 300px !important;
          max-height: 300px !important;
          min-width: 300px !important;
          min-height: 300px !important;
          display: block;
        }
        .statement-table input { width: 90px; }
    </style>
</head>
<body>
<div class="container py-4">
    <h1 class="mb-4">Loan Tracker</h1>
    <div class="pie-container">
        <canvas id="piePaid" class="pie-chart" width="300" height="300" style="width:300px;height:300px;"></canvas>
        <canvas id="piePrincipal" class="pie-chart" width="300" height="300" style="width:300px;height:300px;"></canvas>
    </div>
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">Loans <span class="badge bg-primary" id="totalLoans">0</span></div>
                <ul class="list-group list-group-flush loan-list" id="loanList"></ul>
                <div class="card-footer">
                    <button class="btn btn-success w-100" data-bs-toggle="modal" data-bs-target="#addLoanModal">Add Loan</button>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div id="loanDetails"></div>
        </div>
    </div>
</div>

<!-- Add Loan Modal -->
<div class="modal fade" id="addLoanModal" tabindex="-1" aria-labelledby="addLoanModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addLoanModalLabel">Add New Loan</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="addLoanForm">
          <div class="mb-3">
            <label for="principal" class="form-label">Principal Amount</label>
            <input type="number" class="form-control" id="principal" required min="1">
          </div>
          <div class="mb-3">
            <label for="interest" class="form-label">Interest Rate (%)</label>
            <input type="number" class="form-control" id="interest" required min="0" step="0.01">
          </div>
          <div class="mb-3">
            <label for="tenure" class="form-label">Tenure (Months)</label>
            <input type="number" class="form-control" id="tenure" required min="1">
          </div>
          <div class="mb-3">
            <label for="startDate" class="form-label">First EMI Date</label>
            <input type="date" class="form-control" id="startDate">
          </div>
          <button type="submit" class="btn btn-primary">Add Loan</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Firebase App (core) -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<!-- Firebase Database -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
<script>
  // Paste your firebaseConfig here
  const firebaseConfig = {
    apiKey: "AIzaSyBy2dRpqzkRX-MHf7j5izpX2hc3JCczSCk",
    authDomain: "myloantracker-89928.firebaseapp.com",
    // databaseURL: "https://console.firebase.google.com/project/myloantracker-89928/database/myloantracker-89928-default-rtdb/data/~2F",
    databaseURL: "https://myloantracker-89928-default-rtdb.asia-southeast1.firebasedatabase.app/",
    projectId: "myloantracker-89928",
    storageBucket: "myloantracker-89928.appspot.com",
    messagingSenderId: "55434160742",
    appId: "1:55434160742:web:75887feae61279218e5ba7"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  console.log('Firebase initialized', firebaseConfig);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="loan-tracker.js"></script>
</body>
</html>
